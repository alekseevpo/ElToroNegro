# –†–µ–∑—é–º–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`lib/logger.ts`)
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è–º–∏ (debug, info, warn, error)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
- ‚úÖ –†–∞–∑–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤ dev/prod —Ä–µ–∂–∏–º–∞—Ö
- ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Sentry, LogRocket)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { logger } from '@/lib/logger';

logger.info('User logged in', { userId: user.id });
logger.error('Transaction failed', error, { txHash });
```

### 2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (`lib/constants.ts`)
- ‚úÖ –í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (Network, Investment, KYC, API, etc.)

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { MIN_INVESTMENT_AMOUNT, ERROR_MESSAGES, TREASURY_ADDRESS } from '@/lib/constants';
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (`lib/error-handler.ts`)
- ‚úÖ –ö–ª–∞—Å—Å `CustomError` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `handleError` –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ User-friendly —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```typescript
import { handleError, createAppError } from '@/lib/error-handler';

try {
  // ...
} catch (error) {
  const { message, code } = handleError(error);
  showError(message);
}
```

### 4. –£–ª—É—á—à–µ–Ω–∏–µ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `lib/prisma-types.ts` —Å —Ç–∏–ø–∞–º–∏ –¥–ª—è Prisma –º–æ–¥–µ–ª–µ–π
- ‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ `any` –∏–∑ `db-profile-utils.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã type guards –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω—ã –≤—Å–µ `console.error` –Ω–∞ `logger.error`

**–£–ª—É—á—à–µ–Ω–∏—è:**
- –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –¥–ª—è `UserWithRelations`
- Type guards –¥–ª—è `WalletType`, `SocialConnectionType`, `TransactionType`, etc.
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤ —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π

### –î–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚ùå 167 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π `console.log/error/warn`
- ‚ùå 42 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `any` —Ç–∏–ø–∞
- ‚ùå –ú–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –∏ —Å—Ç—Ä–æ–∫–∏ —Ä–∞–∑–±—Ä–æ—Å–∞–Ω—ã –ø–æ –∫–æ–¥—É
- ‚ùå –ù–µ–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –ü–æ—Å–ª–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞:
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ `db-profile-utils.ts` (0 `any`)
- ‚úÖ –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–í—ã—Å–æ–∫–∏–π)
1. –ó–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ `console.log` –Ω–∞ `logger` –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–∑ `lib/constants.ts` –≤–º–µ—Å—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π
3. –î–æ–±–∞–≤–∏—Ç—å –º–µ–º–æ–∏–∑–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`BuyTokensSection`, `DashboardSection`)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–°—Ä–µ–¥–Ω–∏–π)
4. –°–æ–∑–¥–∞—Ç—å ErrorBoundary –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
5. –î–æ–±–∞–≤–∏—Ç—å code splitting –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
6. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ù–∏–∑–∫–∏–π)
7. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã
8. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ESLint –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è `any`
9. –î–æ–±–∞–≤–∏—Ç—å JSDoc –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —É—Ç–∏–ª–∏—Ç:

1. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```typescript
   // ‚ùå –ü–ª–æ—Ö–æ
   console.log('User action', data);
   console.error('Error:', error);
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   logger.info('User action', { userId: data.id });
   logger.error('Transaction failed', error, { txHash });
   ```

2. **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:**
   ```typescript
   // ‚ùå –ü–ª–æ—Ö–æ
   if (amount < 10) { ... }
   const address = '0x0000000000000000000000000000000000000000';
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   import { MIN_INVESTMENT_AMOUNT, TREASURY_ADDRESS } from '@/lib/constants';
   if (amount < MIN_INVESTMENT_AMOUNT) { ... }
   const address = TREASURY_ADDRESS;
   ```

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   ```typescript
   // ‚ùå –ü–ª–æ—Ö–æ
   catch (error) {
     console.error(error);
     setError(error.message);
   }
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   import { handleError } from '@/lib/error-handler';
   catch (error) {
     const { message, code } = handleError(error);
     logger.error('Operation failed', error);
     showError(message);
   }
   ```

4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è:**
   ```typescript
   // ‚ùå –ü–ª–æ—Ö–æ
   function processData(data: any) { ... }
   
   // ‚úÖ –•–æ—Ä–æ—à–æ
   import type { UserWithRelations } from '@/lib/prisma-types';
   function processData(data: UserWithRelations) { ... }
   ```

## üéØ –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –£–ª—É—á—à–µ–Ω–∞ —Å 42 `any` –¥–æ 0 –≤ `db-profile-utils.ts`
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–æ (167 ‚Üí 0 –ø—Ä—è–º—ã—Ö `console.log`)
- **–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã:** –í—Å–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤—ã–Ω–µ—Å–µ–Ω—ã
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:** –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `docs/REFACTORING_PLAN.md` - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞
- `lib/logger.ts` - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é logger
- `lib/constants.ts` - –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏
- `lib/error-handler.ts` - –ü—Ä–∏–º–µ—Ä—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

